{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\suyash\\\\Code\\\\myproject\\\\frontend\\\\src\\\\components\\\\ParcelScanner.js\",\n  _s = $RefreshSig$();\n// src/components/ParcelScanner.jsx\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Truck, Package, ChevronDown, Scan, CheckCircle, Loader, Briefcase, AlertCircle, BarChart, Box, Clock, Trash2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ParcelScanner = () => {\n  _s();\n  // State Variables\n  const [selectedTruck, setSelectedTruck] = useState('');\n  const [isSelectOpen, setIsSelectOpen] = useState(false);\n  const [parcels, setParcels] = useState([]);\n  const [currentBagId, setCurrentBagId] = useState(null);\n  const [isScanning, setIsScanning] = useState(false);\n  const [bags, setBags] = useState([]);\n  const [activeStep, setActiveStep] = useState('scan');\n  const [scanHistory, setScanHistory] = useState([]);\n  const [stats, setStats] = useState({\n    totalParcels: 0,\n    totalBags: 0,\n    avgParcelWeight: 0,\n    activeRoutes: 0\n  });\n  const [error, setError] = useState(null);\n  const [apiResponse, setApiResponse] = useState(null);\n  const [trucks, setTrucks] = useState([]);\n  const [isFetchingTrucks, setIsFetchingTrucks] = useState(false);\n  const [isAssigning, setIsAssigning] = useState(false);\n  const scannerRef = useRef(null); // Reference for hidden input\n\n  // Destination Colors\n  const destinations = {\n    'NYC': {\n      color: 'bg-blue-100 text-blue-800'\n    },\n    'LA': {\n      color: 'bg-purple-100 text-purple-800'\n    },\n    'Chicago': {\n      color: 'bg-green-100 text-green-800'\n    }\n  };\n\n  // Fetch trucks from API on component mount\n  useEffect(() => {\n    const fetchTrucks = async () => {\n      setIsFetchingTrucks(true);\n      try {\n        const response = await fetch('https://e47e-203-192-227-35.ngrok-free.app/api/devices', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify('')\n        });\n\n        // Log the response for debugging\n        if (!response.ok) {\n          // Attempt to parse the response as text to log HTML error pages\n          const errorText = await response.text();\n          console.error('Error Response:', errorText);\n          throw new Error(`Failed to fetch trucks: ${response.status} ${response.statusText}`);\n        }\n\n        // Parse the response as JSON\n        const data = await response.json();\n        console.log('Trucks Data:', data);\n\n        // Since the response is an array of truck objects, no need to access `data.trucks`\n        if (!Array.isArray(data)) {\n          throw new Error('Invalid data format received from trucks API.');\n        }\n\n        // Map each truck's id to uniqueId\n        const mappedTrucks = data.map(truck => ({\n          ...truck,\n          id: truck.uniqueId // Use uniqueId as id\n        }));\n        setTrucks(mappedTrucks);\n        setError(null);\n      } catch (err) {\n        setError(err.message);\n        // console.error('Fetch Trucks Error:', err);\n      } finally {\n        setIsFetchingTrucks(false);\n      }\n    };\n    fetchTrucks();\n  }, []);\n\n  // Update statistics whenever bags or parcels change\n  useEffect(() => {\n    updateStats();\n  }, [bags, parcels]);\n\n  // Function to update statistics\n  const updateStats = () => {\n    const totalParcels = bags.reduce((acc, bag) => acc + bag.parcels.length, 0) + parcels.length;\n    const totalWeight = bags.reduce((acc, bag) => acc + (bag.bag_weight || 0), 0);\n    const activeRoutes = new Set(bags.map(bag => bag.new_truck_id).filter(Boolean)).size;\n    setStats({\n      totalParcels,\n      totalBags: bags.length,\n      avgParcelWeight: totalParcels ? (totalWeight / totalParcels).toFixed(2) : 0,\n      activeRoutes\n    });\n  };\n\n  // Handle scanning of a parcel\n  const handleScanParcel = scannedId => {\n    if (!isScanning) return;\n    console.log('Scanned ID:', scannedId);\n\n    // Validate scannedId is a number\n    const parcelId = Number(scannedId);\n    if (isNaN(parcelId)) {\n      setError(`Invalid Parcel ID: ${scannedId}. Please scan a numeric ID.`);\n      setScanHistory(prev => [...prev, {\n        tracking_id: scannedId,\n        action: 'invalid_scan',\n        timestamp: new Date().toISOString()\n      }]);\n      return;\n    }\n\n    // Check if the parcel is already scanned or exists in any bag\n    const isAlreadyScanned = parcels.some(parcel => parcel.tracking_id === parcelId);\n    const isInBags = bags.some(bag => bag.parcels.some(parcel => parcel.tracking_id === parcelId));\n    if (isAlreadyScanned || isInBags) {\n      setError(`Parcel ID ${parcelId} is already scanned or exists in a bag.`);\n      setScanHistory(prev => [...prev, {\n        tracking_id: parcelId,\n        action: 'duplicate_scan',\n        timestamp: new Date().toISOString()\n      }]);\n      return;\n    }\n\n    // Create a mock parcel object (replace with actual data if available)\n    const mockParcel = {\n      tracking_id: parcelId,\n      weight: (Math.random() * 10 + 0.5).toFixed(2),\n      // Random weight between 0.5 and 10.5 kg\n      destination: ['NYC', 'LA', 'Chicago'][Math.floor(Math.random() * 3)],\n      status: 'pending',\n      timestamp: new Date().toISOString()\n    };\n    setParcels(prev => [...prev, mockParcel]);\n    setScanHistory(prev => [...prev, {\n      ...mockParcel,\n      action: 'scanned',\n      timestamp: new Date().toISOString()\n    }]);\n    setError(null);\n  };\n\n  // Handle deletion of a parcel\n  const handleDeleteParcel = trackingId => {\n    setParcels(prev => prev.filter(parcel => parcel.tracking_id !== trackingId));\n    setScanHistory(prev => [...prev, {\n      tracking_id: trackingId,\n      action: 'deleted',\n      timestamp: new Date().toISOString()\n    }]);\n  };\n\n  // Handle finishing scanning (creating a bag)\n  const handleFinishScanning = async () => {\n    if (parcels.length === 0) return;\n    try {\n      // Prepare the payload\n      const parcelIds = parcels.map(p => p.tracking_id);\n      const payload = {\n        parcel_ids: parcelIds\n      };\n      console.log('Sending payload to API:', payload);\n\n      // Send the payload to the API\n      const response = await fetch('https://e47e-203-192-227-35.ngrok-free.app/api/setParcelToBag', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n\n      // Log the response for debugging\n      console.log('Finish Scanning Response:', response);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error Response:', errorText);\n        throw new Error(`API Error: ${response.status} ${response.statusText}`);\n      }\n      const data = await response.json();\n      console.log('API Response:', data);\n\n      // Process API response\n      const {\n        updated_parcels,\n        bag_id,\n        bag_weight,\n        bag_volume\n      } = data;\n\n      // Validate response structure\n      if (!bag_id || !Array.isArray(updated_parcels)) {\n        throw new Error('Invalid data format received from setParcelToBag API.');\n      }\n\n      // Create a new bag based on the response\n      const newBag = {\n        id: bag_id,\n        parcels: updated_parcels.map(up => ({\n          tracking_id: Number(up.tracking_id),\n          new_bag_id: Number(up.new_bag_id)\n        })),\n        bag_weight,\n        bag_volume,\n        createdAt: new Date().toISOString(),\n        new_truck_id: null,\n        // To be assigned\n        updated_truck_weight: null,\n        updated_truck_volume: null,\n        updated_filled_capacity: null\n      };\n\n      // Add the new bag to bags\n      setBags(prev => [...prev, newBag]);\n\n      // Clear the parcels list\n      setParcels([]);\n\n      // Update scan history\n      setScanHistory(prev => [...prev, {\n        id: bag_id,\n        action: 'bag_created',\n        timestamp: new Date().toISOString(),\n        parcelCount: updated_parcels.length\n      }]);\n\n      // Update stats\n      updateStats();\n\n      // Set the currentBagId and move to assign step\n      setCurrentBagId(bag_id);\n      setActiveStep('assign');\n      setApiResponse(data);\n      setError(null);\n    } catch (err) {\n      setError(`Failed to create bag: ${err.message}`);\n      console.error('Finish Scanning Error:', err);\n      setScanHistory(prev => [...prev, {\n        tracking_id: null,\n        action: 'api_error',\n        timestamp: new Date().toISOString(),\n        message: err.message\n      }]);\n    }\n  };\n\n  // Handle assigning a bag to a truck\n  const handleAssignTruck = async bagId => {\n    if (!selectedTruck) {\n      setError(\"Please select a valid truck\");\n      return;\n    }\n    setIsAssigning(true);\n    try {\n      // Prepare the payload\n      const payload = {\n        bag_ids: [bagId],\n        truck_id: selectedTruck\n      };\n      console.log('Assigning bag to truck with payload:', payload);\n\n      // Send the payload to the API\n      const response = await fetch('https://e47e-203-192-227-35.ngrok-free.app/api/setBagToTruck', {\n        // Corrected endpoint\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n\n      // Log the response for debugging\n      console.log('Assign Truck Response:', response);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error Response:', errorText);\n        throw new Error(`API Error: ${response.status} ${response.statusText}`);\n      }\n      const data = await response.json();\n      console.log('Assign Truck API Response:', data);\n\n      // Assuming response structure is similar to:\n      // {\n      //   \"updated_bags\": [{\n      //     \"bag_id\": 3930,\n      //     \"new_truck_id\": \"1001\",\n      //     \"updated_truck_weight\": 120.5,\n      //     \"updated_truck_volume\": 4500.75,\n      //     \"updated_filled_capacity\": 80\n      //   }],\n      //   \"errors\": []\n      // }\n\n      if (data.errors && data.errors.length > 0) {\n        throw new Error(data.errors[0]);\n      }\n      const updatedBag = data.updated_bags[0];\n\n      // Update the specific bag in state\n      setBags(prev => prev.map(bag => bag.id === updatedBag.bag_id ? {\n        ...bag,\n        new_truck_id: updatedBag.new_truck_id,\n        updated_truck_weight: updatedBag.updated_truck_weight,\n        updated_truck_volume: updatedBag.updated_truck_volume,\n        updated_filled_capacity: updatedBag.updated_filled_capacity\n      } : bag));\n\n      // Update scan history\n      setScanHistory(prev => [...prev, {\n        id: updatedBag.bag_id,\n        action: 'assigned_to_truck',\n        timestamp: new Date().toISOString(),\n        truckId: updatedBag.new_truck_id\n      }]);\n\n      // Clear selected truck\n      setSelectedTruck('');\n      setIsSelectOpen(false);\n      setActiveStep('scan');\n      setApiResponse(data);\n      setError(null);\n    } catch (err) {\n      setError(`Failed to assign truck: ${err.message}`);\n      console.error('Assign Truck Error:', err);\n      setScanHistory(prev => [...prev, {\n        id: bagId,\n        action: 'assign_error',\n        timestamp: new Date().toISOString(),\n        message: err.message\n      }]);\n    } finally {\n      setIsAssigning(false);\n    }\n  };\n\n  // Toggle scanning state\n  const toggleScanning = () => {\n    if (isScanning) {\n      // If currently scanning, stop scanning and send parcels to API\n      handleFinishScanning();\n      setIsScanning(false);\n    } else {\n      // Start scanning\n      setIsScanning(true);\n      setError(null);\n      setScanHistory([]);\n      if (scannerRef.current) {\n        scannerRef.current.focus();\n      }\n    }\n  };\n\n  // Focus the scanner input when scanning starts\n  useEffect(() => {\n    if (isScanning && scannerRef.current) {\n      scannerRef.current.focus();\n    }\n  }, [isScanning]);\n\n  // Hero Section Component with API Response Display\n  const Hero = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gradient-to-r from-blue-600 to-blue-800 text-white p-8 mb-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-4xl font-bold mb-6\",\n        children: \"Smart Parcel Management System\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl mb-8 text-blue-100\",\n        children: \"Streamline your parcel processing with real-time tracking and automated routing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-4 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur p-4 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"Total Parcels\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-2xl font-bold\",\n            children: stats.totalParcels\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur p-4 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(Briefcase, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"Total Bags\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-2xl font-bold\",\n            children: stats.totalBags\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur p-4 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(BarChart, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"Avg Weight\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-2xl font-bold\",\n            children: [stats.avgParcelWeight, \" kg\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur p-4 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(Clock, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"Active Routes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-2xl font-bold\",\n            children: stats.activeRoutes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this), apiResponse && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 bg-white/10 backdrop-blur p-4 rounded-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-2\",\n          children: \"Latest API Response\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"text-sm overflow-x-auto\",\n          children: JSON.stringify(apiResponse, null, 2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 387,\n    columnNumber: 5\n  }, this);\n\n  // Scan History Component\n  const ScanHistory = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-6 pt-6 border-t\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-semibold mb-4\",\n      children: \"Recent Activity\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: scanHistory.slice(-5).reverse().map((entry, index) => {\n        var _trucks$find;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg text-sm\",\n          children: [entry.action === 'scanned' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Scan, {\n                className: \"h-4 w-4 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Parcel \", entry.tracking_id, \" scanned\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 19\n              }, this), new Date(entry.timestamp).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), entry.action === 'duplicate_scan' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"h-4 w-4 text-red-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Duplicate scan for Parcel \", entry.tracking_id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 19\n              }, this), new Date(entry.timestamp).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), entry.action === 'deleted' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Trash2, {\n                className: \"h-4 w-4 text-yellow-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Parcel \", entry.tracking_id, \" deleted\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this), new Date(entry.timestamp).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), entry.action === 'bag_created' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                className: \"h-4 w-4 text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Bag \", entry.id, \" created with \", entry.parcelCount, \" parcels\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 19\n              }, this), new Date(entry.timestamp).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), entry.action === 'assigned_to_truck' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Truck, {\n                className: \"h-4 w-4 text-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Bag \", entry.id, \" assigned to \", (_trucks$find = trucks.find(t => t.id === entry.truckId)) === null || _trucks$find === void 0 ? void 0 : _trucks$find.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 19\n              }, this), new Date(entry.timestamp).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), entry.action === 'api_error' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"h-4 w-4 text-red-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Error: \", entry.message]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 19\n              }, this), new Date(entry.timestamp).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), entry.action === 'invalid_scan' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"h-4 w-4 text-red-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Invalid scan: \", entry.tracking_id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 19\n              }, this), new Date(entry.timestamp).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, `${entry.tracking_id || entry.id}-${entry.timestamp}-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 440,\n    columnNumber: 5\n  }, this);\n\n  // Scanner Input Component\n  const ScannerInput = () => /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"text\",\n    ref: scannerRef,\n    className: \"absolute opacity-0 pointer-events-none\",\n    onKeyDown: e => {\n      if (e.key === 'Enter') {\n        const scannedId = e.target.value.trim();\n        if (scannedId) {\n          handleScanParcel(scannedId);\n        }\n        e.target.value = '';\n      }\n    },\n    autoFocus: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 540,\n    columnNumber: 5\n  }, this);\n\n  // Assign Section Component\n  const AssignSection = () => {\n    var _trucks$find2;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-span-1 bg-white rounded-2xl shadow-xl p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Truck, {\n            className: \"h-5 w-5 text-purple-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold\",\n            children: \"Assign Bags to Trucks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 7\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this), activeStep === 'assign' && currentBagId && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Current Bag ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium\",\n            children: currentBagId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Select Truck\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIsSelectOpen(!isSelectOpen),\n              className: \"w-full bg-gray-100 border border-gray-300 rounded-lg px-4 py-2 text-left flex justify-between items-center\",\n              children: [selectedTruck ? (_trucks$find2 = trucks.find(t => t.id === selectedTruck)) === null || _trucks$find2 === void 0 ? void 0 : _trucks$find2.name : 'Choose a truck', /*#__PURE__*/_jsxDEV(ChevronDown, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 15\n            }, this), isSelectOpen && /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"absolute z-10 w-full bg-white border border-gray-300 rounded-lg mt-1 max-h-60 overflow-auto\",\n              children: trucks.map(truck => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => {\n                  setSelectedTruck(truck.id);\n                  setIsSelectOpen(false);\n                },\n                className: \"px-4 py-2 hover:bg-gray-100 cursor-pointer\",\n                children: [truck.name, \" (Capacity: \", truck.max_weight || 'N/A', \"kg)\"]\n              }, truck.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAssignTruck(currentBagId),\n          className: `w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors flex items-center justify-center ${isAssigning ? 'opacity-50 cursor-not-allowed' : ''}`,\n          disabled: isAssigning,\n          children: isAssigning ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loader, {\n              className: \"h-5 w-5 mr-2 animate-spin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 17\n            }, this), \"Assigning...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"h-5 w-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 17\n            }, this), \"Assign Truck\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: \"Assigned Bags\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [bags.filter(bag => bag.new_truck_id).length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"No bags assigned yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 13\n          }, this), bags.filter(bag => bag.new_truck_id).map(bag => {\n            var _bag$parcels$, _destinations$bagDest;\n            // Assuming all parcels in a bag have the same destination\n            const bagDestination = (_bag$parcels$ = bag.parcels[0]) === null || _bag$parcels$ === void 0 ? void 0 : _bag$parcels$.destination;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between bg-gray-50 p-3 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  className: \"h-5 w-5 text-green-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: bag.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 650,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [bag.bag_weight, \" kg\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `px-2 py-1 rounded text-sm ${((_destinations$bagDest = destinations[bagDestination]) === null || _destinations$bagDest === void 0 ? void 0 : _destinations$bagDest.color) || 'bg-gray-200 text-gray-800'}`,\n                  children: bagDestination\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 654,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 652,\n                columnNumber: 17\n              }, this)]\n            }, bag.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 15\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 5\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(Hero, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto px-4 grid grid-cols-3 gap-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-2 bg-white rounded-2xl shadow-xl overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-600 text-white p-4 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Package, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold\",\n              children: \"Parcel Scanner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleScanning,\n            className: `px-4 py-2 rounded-lg flex items-center gap-2 ${isScanning ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'} transition-colors duration-200`,\n            children: isScanning ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Loader, {\n                className: \"h-4 w-4 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 685,\n                columnNumber: 19\n              }, this), \"Stop Scanning\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Scan, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 690,\n                columnNumber: 19\n              }, this), \"Start Scanning\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ScannerInput, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 703,\n              columnNumber: 17\n            }, this), error]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 15\n          }, this), isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `border-2 border-dashed rounded-lg p-8 text-center`,\n            children: [/*#__PURE__*/_jsxDEV(Scan, {\n              className: \"h-12 w-12 mx-auto mb-4 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 713,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: \"Scan a parcel to begin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 710,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold\",\n                children: \"Scanned Parcels\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 723,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleFinishScanning,\n                disabled: parcels.length === 0,\n                className: \"px-4 py-2 bg-indigo-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors duration-200\",\n                children: \"Finish Bag\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [parcels.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"No parcels scanned yet.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 736,\n                columnNumber: 19\n              }, this), parcels.map(parcel => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between bg-gray-50 p-3 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-3\",\n                  children: [/*#__PURE__*/_jsxDEV(Package, {\n                    className: \"h-5 w-5 text-blue-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 744,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: parcel.tracking_id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 745,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 743,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-gray-600\",\n                    children: [parcel.weight, \" kg\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 748,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `px-2 py-1 rounded text-sm ${destinations[parcel.destination].color}`,\n                    children: parcel.destination\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 749,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleDeleteParcel(parcel.tracking_id),\n                    className: \"text-red-500 hover:text-red-700\",\n                    title: \"Delete Parcel\",\n                    children: /*#__PURE__*/_jsxDEV(Trash2, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 757,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 752,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 747,\n                  columnNumber: 21\n                }, this)]\n              }, parcel.tracking_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 739,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 734,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ScanHistory, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AssignSection, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 771,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 669,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 667,\n    columnNumber: 5\n  }, this);\n};\n_s(ParcelScanner, \"32ZiYYcWtHS07sLF1Qec5OokzlU=\");\n_c = ParcelScanner;\nexport default ParcelScanner;\nvar _c;\n$RefreshReg$(_c, \"ParcelScanner\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Truck","Package","ChevronDown","Scan","CheckCircle","Loader","Briefcase","AlertCircle","BarChart","Box","Clock","Trash2","jsxDEV","_jsxDEV","Fragment","_Fragment","ParcelScanner","_s","selectedTruck","setSelectedTruck","isSelectOpen","setIsSelectOpen","parcels","setParcels","currentBagId","setCurrentBagId","isScanning","setIsScanning","bags","setBags","activeStep","setActiveStep","scanHistory","setScanHistory","stats","setStats","totalParcels","totalBags","avgParcelWeight","activeRoutes","error","setError","apiResponse","setApiResponse","trucks","setTrucks","isFetchingTrucks","setIsFetchingTrucks","isAssigning","setIsAssigning","scannerRef","destinations","color","fetchTrucks","response","fetch","method","headers","body","JSON","stringify","ok","errorText","text","console","Error","status","statusText","data","json","log","Array","isArray","mappedTrucks","map","truck","id","uniqueId","err","message","updateStats","reduce","acc","bag","length","totalWeight","bag_weight","Set","new_truck_id","filter","Boolean","size","toFixed","handleScanParcel","scannedId","parcelId","Number","isNaN","prev","tracking_id","action","timestamp","Date","toISOString","isAlreadyScanned","some","parcel","isInBags","mockParcel","weight","Math","random","destination","floor","handleDeleteParcel","trackingId","handleFinishScanning","parcelIds","p","payload","parcel_ids","updated_parcels","bag_id","bag_volume","newBag","up","new_bag_id","createdAt","updated_truck_weight","updated_truck_volume","updated_filled_capacity","parcelCount","handleAssignTruck","bagId","bag_ids","truck_id","errors","updatedBag","updated_bags","truckId","toggleScanning","current","focus","Hero","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ScanHistory","slice","reverse","entry","index","_trucks$find","toLocaleTimeString","find","t","name","ScannerInput","type","ref","onKeyDown","e","key","target","value","trim","autoFocus","AssignSection","_trucks$find2","onClick","max_weight","disabled","_bag$parcels$","_destinations$bagDest","bagDestination","title","_c","$RefreshReg$"],"sources":["C:/Users/suyash/Code/myproject/frontend/src/components/ParcelScanner.js"],"sourcesContent":["// src/components/ParcelScanner.jsx\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  Truck,\r\n  Package,\r\n  ChevronDown,\r\n  Scan,\r\n  CheckCircle,\r\n  Loader,\r\n  Briefcase,\r\n  AlertCircle,\r\n  BarChart,\r\n  Box,\r\n  Clock,\r\n  Trash2\r\n} from 'lucide-react';\r\n\r\nconst ParcelScanner = () => {\r\n  // State Variables\r\n  const [selectedTruck, setSelectedTruck] = useState('');\r\n  const [isSelectOpen, setIsSelectOpen] = useState(false);\r\n  const [parcels, setParcels] = useState([]);\r\n  const [currentBagId, setCurrentBagId] = useState(null);\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [bags, setBags] = useState([]);\r\n  const [activeStep, setActiveStep] = useState('scan');\r\n  const [scanHistory, setScanHistory] = useState([]);\r\n  const [stats, setStats] = useState({\r\n    totalParcels: 0,\r\n    totalBags: 0,\r\n    avgParcelWeight: 0,\r\n    activeRoutes: 0\r\n  });\r\n  const [error, setError] = useState(null);\r\n  const [apiResponse, setApiResponse] = useState(null);\r\n  const [trucks, setTrucks] = useState([]);\r\n  const [isFetchingTrucks, setIsFetchingTrucks] = useState(false);\r\n  const [isAssigning, setIsAssigning] = useState(false);\r\n  const scannerRef = useRef(null); // Reference for hidden input\r\n\r\n  // Destination Colors\r\n  const destinations = {\r\n    'NYC': { color: 'bg-blue-100 text-blue-800' },\r\n    'LA': { color: 'bg-purple-100 text-purple-800' },\r\n    'Chicago': { color: 'bg-green-100 text-green-800' }\r\n  };\r\n\r\n  // Fetch trucks from API on component mount\r\n  useEffect(() => {\r\n    const fetchTrucks = async () => {\r\n      setIsFetchingTrucks(true);\r\n      try {\r\n        const response = await fetch('https://e47e-203-192-227-35.ngrok-free.app/api/devices', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify('')\r\n        });\r\n  \r\n        // Log the response for debugging\r\n        if (!response.ok) {\r\n          // Attempt to parse the response as text to log HTML error pages\r\n          const errorText = await response.text();\r\n          console.error('Error Response:', errorText);\r\n          throw new Error(`Failed to fetch trucks: ${response.status} ${response.statusText}`);\r\n        }\r\n  \r\n        // Parse the response as JSON\r\n        const data = await response.json();\r\n  \r\n        console.log('Trucks Data:', data);\r\n  \r\n        // Since the response is an array of truck objects, no need to access `data.trucks`\r\n        if (!Array.isArray(data)) {\r\n          throw new Error('Invalid data format received from trucks API.');\r\n        }\r\n  \r\n        // Map each truck's id to uniqueId\r\n        const mappedTrucks = data.map(truck => ({\r\n          ...truck,\r\n          id: truck.uniqueId, // Use uniqueId as id\r\n        }));\r\n  \r\n        setTrucks(mappedTrucks);\r\n        setError(null);\r\n      } catch (err) {\r\n        setError(err.message);\r\n        // console.error('Fetch Trucks Error:', err);\r\n      } finally {\r\n        setIsFetchingTrucks(false);\r\n      }\r\n    };\r\n  \r\n    fetchTrucks();\r\n  }, []);\r\n\r\n  // Update statistics whenever bags or parcels change\r\n  useEffect(() => {\r\n    updateStats();\r\n  }, [bags, parcels]);\r\n\r\n  // Function to update statistics\r\n  const updateStats = () => {\r\n    const totalParcels = bags.reduce((acc, bag) => acc + bag.parcels.length, 0) + parcels.length;\r\n    const totalWeight = bags.reduce((acc, bag) => acc + (bag.bag_weight || 0), 0);\r\n    const activeRoutes = new Set(bags.map(bag => bag.new_truck_id).filter(Boolean)).size;\r\n\r\n    setStats({\r\n      totalParcels,\r\n      totalBags: bags.length,\r\n      avgParcelWeight: totalParcels ? (totalWeight / totalParcels).toFixed(2) : 0,\r\n      activeRoutes\r\n    });\r\n  };\r\n\r\n  // Handle scanning of a parcel\r\n  const handleScanParcel = (scannedId) => {\r\n    if (!isScanning) return;\r\n\r\n    console.log('Scanned ID:', scannedId);\r\n\r\n    // Validate scannedId is a number\r\n    const parcelId = Number(scannedId);\r\n    if (isNaN(parcelId)) {\r\n      setError(`Invalid Parcel ID: ${scannedId}. Please scan a numeric ID.`);\r\n      setScanHistory(prev => [...prev, {\r\n        tracking_id: scannedId,\r\n        action: 'invalid_scan',\r\n        timestamp: new Date().toISOString()\r\n      }]);\r\n      return;\r\n    }\r\n\r\n    // Check if the parcel is already scanned or exists in any bag\r\n    const isAlreadyScanned = parcels.some(parcel => parcel.tracking_id === parcelId);\r\n    const isInBags = bags.some(bag => bag.parcels.some(parcel => parcel.tracking_id === parcelId));\r\n\r\n    if (isAlreadyScanned || isInBags) {\r\n      setError(`Parcel ID ${parcelId} is already scanned or exists in a bag.`);\r\n      setScanHistory(prev => [...prev, {\r\n        tracking_id: parcelId,\r\n        action: 'duplicate_scan',\r\n        timestamp: new Date().toISOString()\r\n      }]);\r\n      return;\r\n    }\r\n\r\n    // Create a mock parcel object (replace with actual data if available)\r\n    const mockParcel = {\r\n      tracking_id: parcelId,\r\n      weight: (Math.random() * 10 + 0.5).toFixed(2), // Random weight between 0.5 and 10.5 kg\r\n      destination: ['NYC', 'LA', 'Chicago'][Math.floor(Math.random() * 3)],\r\n      status: 'pending',\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    setParcels(prev => [...prev, mockParcel]);\r\n    setScanHistory(prev => [...prev, { ...mockParcel, action: 'scanned', timestamp: new Date().toISOString() }]);\r\n    setError(null);\r\n  };\r\n\r\n  // Handle deletion of a parcel\r\n  const handleDeleteParcel = (trackingId) => {\r\n    setParcels(prev => prev.filter(parcel => parcel.tracking_id !== trackingId));\r\n    setScanHistory(prev => [...prev, { tracking_id: trackingId, action: 'deleted', timestamp: new Date().toISOString() }]);\r\n  };\r\n\r\n  // Handle finishing scanning (creating a bag)\r\n  const handleFinishScanning = async () => {\r\n    if (parcels.length === 0) return;\r\n\r\n    try {\r\n      // Prepare the payload\r\n      const parcelIds = parcels.map(p => p.tracking_id);\r\n      const payload = { parcel_ids: parcelIds };\r\n\r\n      console.log('Sending payload to API:', payload);\r\n\r\n      // Send the payload to the API\r\n      const response = await fetch('https://e47e-203-192-227-35.ngrok-free.app/api/setParcelToBag', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      // Log the response for debugging\r\n      console.log('Finish Scanning Response:', response);\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error('Error Response:', errorText);\r\n        throw new Error(`API Error: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      console.log('API Response:', data);\r\n\r\n      // Process API response\r\n      const { updated_parcels, bag_id, bag_weight, bag_volume } = data;\r\n\r\n      // Validate response structure\r\n      if (!bag_id || !Array.isArray(updated_parcels)) {\r\n        throw new Error('Invalid data format received from setParcelToBag API.');\r\n      }\r\n\r\n      // Create a new bag based on the response\r\n      const newBag = {\r\n        id: bag_id,\r\n        parcels: updated_parcels.map(up => ({\r\n          tracking_id: Number(up.tracking_id),\r\n          new_bag_id: Number(up.new_bag_id)\r\n        })),\r\n        bag_weight,\r\n        bag_volume,\r\n        createdAt: new Date().toISOString(),\r\n        new_truck_id: null, // To be assigned\r\n        updated_truck_weight: null,\r\n        updated_truck_volume: null,\r\n        updated_filled_capacity: null\r\n      };\r\n\r\n      // Add the new bag to bags\r\n      setBags(prev => [...prev, newBag]);\r\n\r\n      // Clear the parcels list\r\n      setParcels([]);\r\n\r\n      // Update scan history\r\n      setScanHistory(prev => [...prev, {\r\n        id: bag_id,\r\n        action: 'bag_created',\r\n        timestamp: new Date().toISOString(),\r\n        parcelCount: updated_parcels.length\r\n      }]);\r\n\r\n      // Update stats\r\n      updateStats();\r\n\r\n      // Set the currentBagId and move to assign step\r\n      setCurrentBagId(bag_id);\r\n      setActiveStep('assign');\r\n      setApiResponse(data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(`Failed to create bag: ${err.message}`);\r\n      console.error('Finish Scanning Error:', err);\r\n      setScanHistory(prev => [...prev, {\r\n        tracking_id: null,\r\n        action: 'api_error',\r\n        timestamp: new Date().toISOString(),\r\n        message: err.message\r\n      }]);\r\n    }\r\n  };\r\n\r\n  // Handle assigning a bag to a truck\r\n  const handleAssignTruck = async (bagId) => {\r\n    if (!selectedTruck) {\r\n      setError(\"Please select a valid truck\");\r\n      return;\r\n    }\r\n\r\n    setIsAssigning(true);\r\n\r\n    try {\r\n      // Prepare the payload\r\n      const payload = {\r\n        bag_ids: [bagId],\r\n        truck_id: selectedTruck\r\n      };\r\n\r\n      console.log('Assigning bag to truck with payload:', payload);\r\n\r\n      // Send the payload to the API\r\n      const response = await fetch('https://e47e-203-192-227-35.ngrok-free.app/api/setBagToTruck', { // Corrected endpoint\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      // Log the response for debugging\r\n      console.log('Assign Truck Response:', response);\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error('Error Response:', errorText);\r\n        throw new Error(`API Error: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      console.log('Assign Truck API Response:', data);\r\n\r\n      // Assuming response structure is similar to:\r\n      // {\r\n      //   \"updated_bags\": [{\r\n      //     \"bag_id\": 3930,\r\n      //     \"new_truck_id\": \"1001\",\r\n      //     \"updated_truck_weight\": 120.5,\r\n      //     \"updated_truck_volume\": 4500.75,\r\n      //     \"updated_filled_capacity\": 80\r\n      //   }],\r\n      //   \"errors\": []\r\n      // }\r\n\r\n      if (data.errors && data.errors.length > 0) {\r\n        throw new Error(data.errors[0]);\r\n      }\r\n\r\n      const updatedBag = data.updated_bags[0];\r\n\r\n      // Update the specific bag in state\r\n      setBags(prev => \r\n        prev.map(bag => \r\n          bag.id === updatedBag.bag_id \r\n            ? { \r\n                ...bag, \r\n                new_truck_id: updatedBag.new_truck_id,\r\n                updated_truck_weight: updatedBag.updated_truck_weight,\r\n                updated_truck_volume: updatedBag.updated_truck_volume,\r\n                updated_filled_capacity: updatedBag.updated_filled_capacity\r\n              }\r\n            : bag\r\n        )\r\n      );\r\n\r\n      // Update scan history\r\n      setScanHistory(prev => [...prev, {\r\n        id: updatedBag.bag_id,\r\n        action: 'assigned_to_truck',\r\n        timestamp: new Date().toISOString(),\r\n        truckId: updatedBag.new_truck_id\r\n      }]);\r\n\r\n      // Clear selected truck\r\n      setSelectedTruck('');\r\n      setIsSelectOpen(false);\r\n      setActiveStep('scan');\r\n      setApiResponse(data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(`Failed to assign truck: ${err.message}`);\r\n      console.error('Assign Truck Error:', err);\r\n      setScanHistory(prev => [...prev, {\r\n        id: bagId,\r\n        action: 'assign_error',\r\n        timestamp: new Date().toISOString(),\r\n        message: err.message\r\n      }]);\r\n    } finally {\r\n      setIsAssigning(false);\r\n    }\r\n  };\r\n\r\n  // Toggle scanning state\r\n  const toggleScanning = () => {\r\n    if (isScanning) {\r\n      // If currently scanning, stop scanning and send parcels to API\r\n      handleFinishScanning();\r\n      setIsScanning(false);\r\n    } else {\r\n      // Start scanning\r\n      setIsScanning(true);\r\n      setError(null);\r\n      setScanHistory([]);\r\n      if (scannerRef.current) {\r\n        scannerRef.current.focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  // Focus the scanner input when scanning starts\r\n  useEffect(() => {\r\n    if (isScanning && scannerRef.current) {\r\n      scannerRef.current.focus();\r\n    }\r\n  }, [isScanning]);\r\n\r\n  // Hero Section Component with API Response Display\r\n  const Hero = () => (\r\n    <div className=\"bg-gradient-to-r from-blue-600 to-blue-800 text-white p-8 mb-8\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <h1 className=\"text-4xl font-bold mb-6\">Smart Parcel Management System</h1>\r\n        <p className=\"text-xl mb-8 text-blue-100\">Streamline your parcel processing with real-time tracking and automated routing</p>\r\n\r\n        <div className=\"grid grid-cols-4 gap-6\">\r\n          <div className=\"bg-white/10 backdrop-blur p-4 rounded-xl\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <Box className=\"h-5 w-5\" />\r\n              <span className=\"font-semibold\">Total Parcels</span>\r\n            </div>\r\n            <span className=\"text-2xl font-bold\">{stats.totalParcels}</span>\r\n          </div>\r\n\r\n          <div className=\"bg-white/10 backdrop-blur p-4 rounded-xl\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <Briefcase className=\"h-5 w-5\" />\r\n              <span className=\"font-semibold\">Total Bags</span>\r\n            </div>\r\n            <span className=\"text-2xl font-bold\">{stats.totalBags}</span>\r\n          </div>\r\n\r\n          <div className=\"bg-white/10 backdrop-blur p-4 rounded-xl\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <BarChart className=\"h-5 w-5\" />\r\n              <span className=\"font-semibold\">Avg Weight</span>\r\n            </div>\r\n            <span className=\"text-2xl font-bold\">{stats.avgParcelWeight} kg</span>\r\n          </div>\r\n\r\n          <div className=\"bg-white/10 backdrop-blur p-4 rounded-xl\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <Clock className=\"h-5 w-5\" />\r\n              <span className=\"font-semibold\">Active Routes</span>\r\n            </div>\r\n            <span className=\"text-2xl font-bold\">{stats.activeRoutes}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {apiResponse && (\r\n          <div className=\"mt-6 bg-white/10 backdrop-blur p-4 rounded-xl\">\r\n            <h3 className=\"text-lg font-semibold mb-2\">Latest API Response</h3>\r\n            <pre className=\"text-sm overflow-x-auto\">\r\n              {JSON.stringify(apiResponse, null, 2)}\r\n            </pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Scan History Component\r\n  const ScanHistory = () => (\r\n    <div className=\"mt-6 pt-6 border-t\">\r\n      <h3 className=\"text-lg font-semibold mb-4\">Recent Activity</h3>\r\n      <div className=\"space-y-2\">\r\n        {scanHistory.slice(-5).reverse().map((entry, index) => (\r\n          <div\r\n            key={`${entry.tracking_id || entry.id}-${entry.timestamp}-${index}`}\r\n            className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg text-sm\"\r\n          >\r\n            {entry.action === 'scanned' && (\r\n              <>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Scan className=\"h-4 w-4 text-blue-600\" />\r\n                  <span>Parcel {entry.tracking_id} scanned</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-gray-600\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  {new Date(entry.timestamp).toLocaleTimeString()}\r\n                </div>\r\n              </>\r\n            )}\r\n            {entry.action === 'duplicate_scan' && (\r\n              <>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <AlertCircle className=\"h-4 w-4 text-red-600\" />\r\n                  <span>Duplicate scan for Parcel {entry.tracking_id}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-gray-600\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  {new Date(entry.timestamp).toLocaleTimeString()}\r\n                </div>\r\n              </>\r\n            )}\r\n            {entry.action === 'deleted' && (\r\n              <>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Trash2 className=\"h-4 w-4 text-yellow-600\" />\r\n                  <span>Parcel {entry.tracking_id} deleted</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-gray-600\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  {new Date(entry.timestamp).toLocaleTimeString()}\r\n                </div>\r\n              </>\r\n            )}\r\n            {entry.action === 'bag_created' && (\r\n              <>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Box className=\"h-4 w-4 text-green-600\" />\r\n                  <span>Bag {entry.id} created with {entry.parcelCount} parcels</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-gray-600\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  {new Date(entry.timestamp).toLocaleTimeString()}\r\n                </div>\r\n              </>\r\n            )}\r\n            {entry.action === 'assigned_to_truck' && (\r\n              <>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Truck className=\"h-4 w-4 text-purple-600\" />\r\n                  <span>Bag {entry.id} assigned to {trucks.find(t => t.id === entry.truckId)?.name}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-gray-600\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  {new Date(entry.timestamp).toLocaleTimeString()}\r\n                </div>\r\n              </>\r\n            )}\r\n            {entry.action === 'api_error' && (\r\n              <>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <AlertCircle className=\"h-4 w-4 text-red-600\" />\r\n                  <span>Error: {entry.message}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-gray-600\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  {new Date(entry.timestamp).toLocaleTimeString()}\r\n                </div>\r\n              </>\r\n            )}\r\n            {entry.action === 'invalid_scan' && (\r\n              <>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <AlertCircle className=\"h-4 w-4 text-red-600\" />\r\n                  <span>Invalid scan: {entry.tracking_id}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-gray-600\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  {new Date(entry.timestamp).toLocaleTimeString()}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Scanner Input Component\r\n  const ScannerInput = () => (\r\n    <input\r\n      type=\"text\"\r\n      ref={scannerRef}\r\n      className=\"absolute opacity-0 pointer-events-none\"\r\n      onKeyDown={(e) => {\r\n        if (e.key === 'Enter') {\r\n          const scannedId = e.target.value.trim();\r\n          if (scannedId) {\r\n            handleScanParcel(scannedId);\r\n          }\r\n          e.target.value = '';\r\n        }\r\n      }}\r\n      autoFocus\r\n    />\r\n  );\r\n\r\n  // Assign Section Component\r\n  const AssignSection = () => (\r\n    <div className=\"col-span-1 bg-white rounded-2xl shadow-xl p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <Truck className=\"h-5 w-5 text-purple-600\" />\r\n          <h2 className=\"text-xl font-semibold\">Assign Bags to Trucks</h2>\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700\">\r\n          <AlertCircle className=\"h-5 w-5\" />\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {activeStep === 'assign' && currentBagId && (\r\n        <div>\r\n          <div className=\"mb-4\">\r\n            <span className=\"text-sm text-gray-600\">Current Bag ID</span>\r\n            <p className=\"font-medium\">{currentBagId}</p>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Select Truck</label>\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => setIsSelectOpen(!isSelectOpen)}\r\n                className=\"w-full bg-gray-100 border border-gray-300 rounded-lg px-4 py-2 text-left flex justify-between items-center\"\r\n              >\r\n                {selectedTruck ? trucks.find(t => t.id === selectedTruck)?.name : 'Choose a truck'}\r\n                <ChevronDown className=\"h-5 w-5\" />\r\n              </button>\r\n              {isSelectOpen && (\r\n                <ul className=\"absolute z-10 w-full bg-white border border-gray-300 rounded-lg mt-1 max-h-60 overflow-auto\">\r\n                  {trucks.map(truck => (\r\n                    <li\r\n                      key={truck.id}\r\n                      onClick={() => {\r\n                        setSelectedTruck(truck.id);\r\n                        setIsSelectOpen(false);\r\n                      }}\r\n                      className=\"px-4 py-2 hover:bg-gray-100 cursor-pointer\"\r\n                    >\r\n                      {truck.name} (Capacity: {truck.max_weight || 'N/A'}kg)\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={() => handleAssignTruck(currentBagId)}\r\n            className={`w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors flex items-center justify-center ${\r\n              isAssigning ? 'opacity-50 cursor-not-allowed' : ''\r\n            }`}\r\n            disabled={isAssigning}\r\n          >\r\n            {isAssigning ? (\r\n              <>\r\n                <Loader className=\"h-5 w-5 mr-2 animate-spin\" />\r\n                Assigning...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <CheckCircle className=\"h-5 w-5 mr-2\" />\r\n                Assign Truck\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Assigned Bags List */}\r\n      <div className=\"mt-6\">\r\n        <h3 className=\"text-lg font-semibold mb-4\">Assigned Bags</h3>\r\n        <div className=\"space-y-2\">\r\n          {bags.filter(bag => bag.new_truck_id).length === 0 && (\r\n            <p className=\"text-gray-600\">No bags assigned yet.</p>\r\n          )}\r\n          {bags.filter(bag => bag.new_truck_id).map(bag => {\r\n            // Assuming all parcels in a bag have the same destination\r\n            const bagDestination = bag.parcels[0]?.destination;\r\n\r\n            return (\r\n              <div\r\n                key={bag.id}\r\n                className=\"flex items-center justify-between bg-gray-50 p-3 rounded-lg\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Box className=\"h-5 w-5 text-green-600\" />\r\n                  <span className=\"font-medium\">{bag.id}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                  <span className=\"text-sm text-gray-600\">{bag.bag_weight} kg</span>\r\n                  <span className={`px-2 py-1 rounded text-sm ${destinations[bagDestination]?.color || 'bg-gray-200 text-gray-800'}`}>\r\n                    {bagDestination}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <Hero />\r\n      <div className=\"max-w-6xl mx-auto px-4 grid grid-cols-3 gap-8\">\r\n        {/* Scanning Section */}\r\n        <div className=\"col-span-2 bg-white rounded-2xl shadow-xl overflow-hidden\">\r\n          <div className=\"bg-blue-600 text-white p-4 flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Package className=\"h-5 w-5\" />\r\n              <h2 className=\"text-xl font-semibold\">Parcel Scanner</h2>\r\n            </div>\r\n            <button\r\n              onClick={toggleScanning}\r\n              className={`px-4 py-2 rounded-lg flex items-center gap-2 ${\r\n                isScanning ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'\r\n              } transition-colors duration-200`}\r\n            >\r\n              {isScanning ? (\r\n                <>\r\n                  <Loader className=\"h-4 w-4 animate-spin\" />\r\n                  Stop Scanning\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Scan className=\"h-4 w-4\" />\r\n                  Start Scanning\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Hidden Scanner Input */}\r\n          <ScannerInput />\r\n\r\n          <div className=\"p-6\">\r\n            {error && (\r\n              <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700\">\r\n                <AlertCircle className=\"h-5 w-5\" />\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            {/* Scanning Interface */}\r\n            {isScanning && (\r\n              <div \r\n                className={`border-2 border-dashed rounded-lg p-8 text-center`}\r\n              >\r\n                <Scan className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\r\n                <p className=\"text-gray-600\">\r\n                  Scan a parcel to begin\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Scanned Parcels List */}\r\n            <div className=\"mt-6\">\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <h3 className=\"text-lg font-semibold\">Scanned Parcels</h3>\r\n                {/* The \"Finish Bag\" button is now used to send the scanned parcels to the API */}\r\n                <button\r\n                  onClick={handleFinishScanning}\r\n                  disabled={parcels.length === 0}\r\n                  className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors duration-200\"\r\n                >\r\n                  Finish Bag\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"space-y-2\">\r\n                {parcels.length === 0 && (\r\n                  <p className=\"text-gray-600\">No parcels scanned yet.</p>\r\n                )}\r\n                {parcels.map(parcel => (\r\n                  <div\r\n                    key={parcel.tracking_id}\r\n                    className=\"flex items-center justify-between bg-gray-50 p-3 rounded-lg\"\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Package className=\"h-5 w-5 text-blue-600\" />\r\n                      <span className=\"font-medium\">{parcel.tracking_id}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <span className=\"text-sm text-gray-600\">{parcel.weight} kg</span>\r\n                      <span className={`px-2 py-1 rounded text-sm ${destinations[parcel.destination].color}`}>\r\n                        {parcel.destination}\r\n                      </span>\r\n                      <button\r\n                        onClick={() => handleDeleteParcel(parcel.tracking_id)}\r\n                        className=\"text-red-500 hover:text-red-700\"\r\n                        title=\"Delete Parcel\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Scan History */}\r\n            <ScanHistory />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Assign Section */}\r\n        <AssignSection />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParcelScanner;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}